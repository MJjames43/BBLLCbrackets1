var _ref,_ref1,_ref2;if((_ref=window.Dropbox)==null){window.Dropbox={}}if((_ref1=Dropbox.baseUrl)==null){Dropbox.baseUrl="https://www.dropbox.com"}if((_ref2=Dropbox.blockBaseUrl)==null){Dropbox.blockBaseUrl="https://dl.dropbox.com"}Dropbox.addListener=function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{c.attachEvent("on"+b,function(d){d.preventDefault=function(){return this.returnValue=false};return a(d)})}};Dropbox.removeListener=function(c,b,a){if(c.removeEventListener){c.removeEventListener(b,a,false)}else{c.detachEvent("on"+b,a)}};Dropbox._chooserUrl=function(i,e){var g,f,a,d,h,c,b;h=encodeURIComponent(window.location.protocol+"//"+window.location.host);g=encodeURIComponent(this.appKey);a=encodeURIComponent(i.linkType||"");c=encodeURIComponent(i._trigger||"js");d=Boolean(i.multiselect);f=encodeURIComponent(i.extensions||"");e=Boolean(e);b=""+this.baseUrl+"/chooser?origin="+h+"&app_key="+g+"&link_type="+a;b+="&trigger="+c+"&multiselect="+d+"&extensions="+f+"&iframe="+e;return b};Dropbox._saverUrl=function(c){var d,a,b;a=encodeURIComponent(window.location.protocol+"//"+window.location.host);d=encodeURIComponent(this.appKey);b=""+this.baseUrl+"/saver?origin="+a+"&app_key="+d;return b};Dropbox._handleMessageEvent=function(a,f,c){var e,b,d;e=JSON.parse(a.data);switch(e.method){case"ready":if(c.files!=null){d=JSON.stringify({method:"files",params:c.files});if(Dropbox._ieframe&&(a.source.opener!=null)){b=Dropbox._ieframe.contentWindow}else{b=a.source}b.postMessage(d,Dropbox.baseUrl)}if(typeof c.ready==="function"){c.ready()}break;case"files_selected":case"files_saved":if(typeof f==="function"){f()}if(typeof c.success==="function"){c.success(e.params)}break;case"progress":if(typeof c.progress==="function"){c.progress(e.params)}break;case"close_dialog":if(typeof f==="function"){f()}if(typeof c.cancel==="function"){c.cancel()}break;case"web_session_error":if(typeof f==="function"){f()}if(typeof c.webSessionFailure==="function"){c.webSessionFailure()}break;case"web_session_unlinked":if(typeof f==="function"){f()}if(typeof c.webSessionUnlinked==="function"){c.webSessionUnlinked()}break;case"resize":if(typeof c.resize==="function"){c.resize(e.params)}break;case"error":if(typeof f==="function"){f()}if(typeof c.error==="function"){c.error(e.params)}break;case"job_id":if(typeof f==="function"){f()}if(typeof c.job_id==="function"){c.job_id(e.params)}break;case"_debug_log":if(typeof console!=="undefined"&&console!==null){console.log(e.params.msg)}}};Dropbox._createIEFrame=function(){var a;if(navigator.appName==="Microsoft Internet Explorer"){a=document.createElement("iframe");a.setAttribute("id","dropbox_xcomm");a.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html");a.style.display="none";document.getElementsByTagName("body")[0].appendChild(a);Dropbox._ieframe=a}};Dropbox.createChooserWidget=function(a){var b,c=this;b=this._createWidgetElement(this._chooserUrl(a,true));b._handler=function(d){if(d.source===b.contentWindow&&d.origin===c.baseUrl){c._handleMessageEvent(d,null,a)}};this.addListener(window,"message",b._handler);return b};Dropbox.createWidget=Dropbox.createChooserWidget;Dropbox.cleanupWidget=function(a){if(!a._handler){throw"Invalid widget!"}this.removeListener(window,"message",a._handler);delete a._handler};Dropbox.cleanupChooserWidget=Dropbox.cleanupWidget;Dropbox._popupDimensionsString=function(a,b){var d,c;d=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.offsetWidth)-a)/2;c=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.offsetHeight)-b)/2;return"width="+a+",height="+b+",left="+d+",top="+c};var __slice=[].slice,__indexOf=[].indexOf||function(c){for(var b=0,a=this.length;b<a;b++){if(b in this&&this[b]===c){return b}}return -1};Dropbox.init=function(a){this.appKey=a.appKey};Dropbox._createWidgetElement=function(a){var b;b=document.createElement("iframe");b.src=a;b.style.display="block";b.style.backgroundColor="white";b.style.border="none";return b};Dropbox._jsonpCounter=1;Dropbox.saveURL=function(){var a;if((a=window.console)!=null){if(typeof a.warn==="function"){a.warn("Dropbox.saveURL is deprecated.  Please use Dropbox.save")}}return Dropbox.save(arguments[0],arguments[1],arguments[2])};Dropbox.save=function(g,i,e){var a,c,k,l,b,d,j,f,h=this;if(e==null){e={}}if(typeof g==="string"){l=e;l.files=[{url:g,filename:i}]}else{l=g}l.job_id=function(n){var m;m=function(){var t,r,s,o,p,q;p=""+h.baseUrl+"/dropins/job_status?job="+n+"&app_key="+h.appKey;s=function(v){var u;if(v.status==="COMPLETE"){if(typeof l.progress==="function"){l.progress(1)}if(typeof l.success==="function"){l.success()}}else{if((u=v.status)==="PENDING"||u==="DOWNLOADING"){if(v.progress!=null){if(typeof l.progress==="function"){l.progress(v.progress/100)}}setTimeout(m,1500)}else{if(v.status==="FAILED"){if(typeof l.error==="function"){l.error(v.error)}}}}};if("withCredentials" in new XMLHttpRequest()){q=new XMLHttpRequest();q.onload=function(){return s(JSON.parse(q.responseText))};q.onerror=function(){return typeof l.error==="function"?l.error():void 0};q.open("GET",p,true);return q.send()}else{t="DropboxJsonpCallback"+Dropbox._jsonpCounter++;r=false;window[t]=function(u){r=true;return s(u)};o=document.createElement("script");o.src=""+p+"&callback="+t;o.onreadystatechange=function(){var u;if(o.readyState==="loaded"){if(!r){if(typeof l.error==="function"){l.error()}}return(u=o.parentNode)!=null?u.removeChild(o):void 0}};return document.getElementsByTagName("head")[0].appendChild(o)}};if(typeof l.progress==="function"){l.progress(0)}return m()};if(!(typeof l.files==="object"&&l.files.length)){throw"Opening the saver failed. The object passed in must have a 'files' property that contains a list of objects.  See documentation.";return}f=l.files;for(d=0,j=f.length;d<j;d++){c=f[d];if(typeof c.url!=="string"||typeof c.filename!=="string"){throw"File[s] to download incorrectly configured.  Each file must have a url and a filename represented as a string. See documentation."}}a=this._popupDimensionsString(352,209);b=this._openPopup(this._saverUrl(l),a);k=function(n){var m;if(n.source===b||n.source===((m=Dropbox._ieframe)!=null?m.contentWindow:void 0)){Dropbox._handleMessageEvent(n,(function(){b.close();Dropbox.removeListener(window,"message",k)}),l)}};Dropbox.addListener(window,"message",k);return b};Dropbox._openPopup=function(b,c){var a;a=window.open(b,"dropbox",""+c+",resizable=yes,location=yes");a.focus();return a};Dropbox.choose=function(i){var d,a,g,f,j,h,b,e,c;if(i==null){throw"You must pass in options"}if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Chooser");return}c=660;f=440;if(i.iframe){e=Dropbox._createWidgetElement(this._chooserUrl(i,true));e.style.width=c+"px";e.style.height=f+"px";h=document.createElement("div");h.style.position="fixed";h.style.left=h.style.right=h.style.top=h.style.bottom="0px";h.style.zIndex="1000";d=document.createElement("div");d.style.position="absolute";d.style.left=d.style.right=d.style.top=d.style.bottom="0px";d.style.backgroundColor="rgb(160, 160, 160)";d.style.opacity="0.2";d.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";j=document.createElement("div");j.style.position="relative";j.style.width=c+"px";j.style.margin="125px auto 0px auto";j.style.border="1px solid #ACACAC";j.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";j.appendChild(e);h.appendChild(d);h.appendChild(j);document.body.appendChild(h);g=function(k){if(k.source===e.contentWindow){Dropbox._handleMessageEvent(k,(function(){document.body.removeChild(h);Dropbox.removeListener(window,"message",g)}),i)}};Dropbox.addListener(window,"message",g)}else{a=this._popupDimensionsString(c,f);b=this._openPopup(this._chooserUrl(i),a);g=function(k){var l;if(k.source===b||k.source===((l=Dropbox._ieframe)!=null?l.contentWindow:void 0)){Dropbox._handleMessageEvent(k,(function(){b.close();Dropbox.removeListener(window,"message",g)}),i)}};Dropbox.addListener(window,"message",g)}};Dropbox.attach=Dropbox.choose;Dropbox.isBrowserSupported=function(){var a;a=Dropbox._isBrowserSupportedCheck();Dropbox.isBrowserSupported=function(){return a};return a};Dropbox._isBrowserSupportedCheck=function(){var d,c,a,b;b=[/Windows Phone/,/BB10;/,/CriOS/];for(c=0,a=b.length;c<a;c++){d=b[c];if(d.test(navigator.userAgent)){return false}}return true};Dropbox.filenameFromPath=function(a){return a.replace(/\/+$/g,"").split("/").pop()};Dropbox.filenameFromUrl=function(c){var b;b=document.createElement("a");b.href=c;return Dropbox.filenameFromPath(b.pathname)};Dropbox.createSaveButton=function(){var d,g,a,c,e,f,b;d=1<=arguments.length?__slice.call(arguments,0):[];if(typeof d[0]==="string"){b=d.shift();a=d.shift()||Dropbox.filenameFromUrl(b);c={files:[{url:b,filename:a}]}}else{c=d.shift()}g=d.shift();if(g!=null){g.innerHTML=""}else{g=document.createElement("a");g.href="#";g.className="dropbox-saver"}g.className+=" dropbox-saver-default";e=document.createElement("span");e.className="saver-btn-status";g.appendChild(e);f=document.createTextNode("Save to Dropbox");g.appendChild(f);Dropbox.addListener(g,"click",function(h){if(h.preventDefault!=null){h.preventDefault()}else{h.returnValue=false}if(!(g.className.indexOf("dropbox-saver-error")>=0||g.className.indexOf("dropbox-saver-default")>=0)){return}return Dropbox.save({files:(typeof c.files==="function"?c.files():void 0)||c.files,success:function(){f.textContent="Save to Dropbox";g.className="dropbox-saver dropbox-saver-success";if(typeof c.success==="function"){c.success()}},progress:function(i){g.className="dropbox-saver dropbox-saver-progress";f.textContent="Saving to Dropbox";if(typeof c.progress==="function"){c.progress(i)}},cancel:function(){f.textContent="Save to Dropbox";if(typeof c.cancel==="function"){c.cancel()}},error:function(){g.className="dropbox-saver dropbox-saver-error";f.textContent="Save to Dropbox";if(typeof c.error==="function"){c.error()}}})});return g};(function(){var a,c,d,b,f,e;f=function(h,g){return"background: "+h+";\nbackground: -moz-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: -webkit-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: linear-gradient(to bottom, "+h+" 0%, "+g+" 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+g+"',GradientType=0);"};b=function(j,i,m){var l,h,g;if(m==null){m={}}if(document.createEvent!=null){l=document.createEvent("Event");l.initEvent(i,true,true);for(h in m){g=m[h];l[h]=g}j.dispatchEvent(l)}};if(!Dropbox.appKey){Dropbox.appKey=(e=document.getElementById("dropboxjs"))!=null?e.getAttribute("data-app-key"):void 0}c=document.createElement("style");c.type="text/css";d=".dropbox-chooser { width: 152px; height: 25px; cursor: pointer;\n  background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/chooser-button-sprites.png'); }\n\n@-webkit-keyframes rotate {\n  from  { -webkit-transform: rotate(0deg); }\n  to   { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes rotate {\n  from  { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n}\n\n@media\n(-webkit-min-device-pixel-ratio: 1.5),\n(min-resolution: 144dpi) {\n  .dropbox-chooser {\n    background-image: url('"+Dropbox.baseUrl+'/static/images/widgets/chooser-button-sprites-2x.png\');\n    background-size: 305px auto;\n    -webkit-background-size: 305px auto;\n  }\n  .dropbox-chooser:hover { background-position: 0 -50px; }\n  .dropbox-chooser:active { background-position: 0 -100px; }\n  .dropbox-chooser-used { background-position: 304px 0; }\n  .dropbox-chooser-used:hover { background-position: 304px -50px; }\n  .dropbox-chooser-used:active { background-position: 304px -100px; }\n}\n\n.dropbox-chooser:hover { background-position: 0 -25px; }\n.dropbox-chooser:active { background-position: 0 -50px; }\n.dropbox-chooser-used { background-position: 152px 0; }\n.dropbox-chooser-used:hover { background-position: 152px -25px; }\n.dropbox-chooser-used:active { background-position: 152px -50px; }\n.dropbox-chooser-disabled { opacity: 0.4}\n\n.dropbox-saver {\n  font-family: "Open Sans", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 600;\n  height: 25px;\n  color: #636363;\n  text-decoration: none;\n  padding: 2px 7px 4px 5px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  '+(f("#fcfcfc","#f5f5f5"))+"\n}\n.dropbox-saver-default:hover, .dropbox-saver-error:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  "+(f("#fdfdfd","#f5f5f5"))+"\n}\n.dropbox-saver-default:active, .dropbox-saver-error:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n\n.dropbox-saver .saver-btn-status {\n  display: inline-block;\n  position: relative;\n  width: 15px;\n  height: 14px;\n  margin: 0 5px 0 0;\n}\n.dropbox-saver-default .saver-btn-status {\n  top: 3px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-logo.png') -7px 0px;\n}\n\n.dropbox-saver-progress .saver-btn-status {\n  top: 3px;\n  width: 18px;\n  margin: 0 2px 0 0;\n  background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress.png') no-repeat center center;\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 1.7s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-name: rotate;\n  animation-duration: 1.7s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.dropbox-saver-success .saver-btn-status {\n  top: 4px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-success.png') no-repeat -7px 0px;\n}\n\n.dropbox-saver-disabled {\n  background: #e0e0e0;\n  border: 1px #dadada solid;\n  border-bottom: 1px solid #ccc;\n  box-shadow: none;\n}\n\n.dropbox-saver-disabled .saver-btn-status {\n  top: 3px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-inactive.png') no-repeat -7px 0px;\n}\n\n.dropbox-saver-error .saver-btn-status {\n  top: 3px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-error.png') no-repeat -7px 0px;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.5) {\n  .dropbox-saver-default .saver-btn-status {\n    background-position: 0 -14px;\n    background-size: 15px 28px;\n    -webkit-background-size: 15px 28px;\n  }\n\n  .dropbox-saver-success .saver-btn-status {\n    background-position: 0 -16px;\n    background-size: 15px 28px;\n    -webkit-background-size: 15px 28px;\n  }\n\n  .dropbox-saver-progress .saver-btn-status {\n    background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n    background-size: 20px 20px;\n    -webkit-background-size: 20px 20px;\n  }\n\n  .dropbox-saver-disabled .saver-btn-status {\n    background-position: 0 -14px;\n    background-size: 15px 28px;\n    -webkit-background-size: 15px 28px;\n  }\n\n  .dropbox-saver-error .saver-btn-status {\n    top: 3px;\n    background-position: 0 -14px;\n    background-size: 15px 28px;\n    -webkit-background-size: 15px 28px;\n  }\n}\n";if(c.styleSheet){c.styleSheet.cssText=d}else{c.textContent=d}document.getElementsByTagName("head")[0].appendChild(c);a=function(){var j,l,k,i,h,g,m;Dropbox._createIEFrame();if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",a,false)}else{if(document.detachEvent){document.detachEvent("onreadystatechange",a)}}g=document.getElementsByTagName("input");for(l=0,i=g.length;l<i;l++){j=g[l];if(j.getAttribute("type")==="dropbox-chooser"){(function(o){var n;n=document.createElement("div");n.className="dropbox-chooser";o.style.display="none";if(!Dropbox.isBrowserSupported()){n.className+=" dropbox-chooser-disabled"}Dropbox.addListener(n,"click",function(p){var q;Dropbox.choose({success:function(s){var t,r;r=(function(){var w,v,u;u=[];for(w=0,v=s.length;w<v;w++){t=s[w];u.push(t.link)}return u})();o.value=r.join(", ");o.files=s;b(o,"DbxChooserSuccess",{files:s});n.className="dropbox-chooser dropbox-chooser-used"},cancel:function(){b(o,"DbxChooserCancel")},linkType:o.getAttribute("data-link-type")||"preview",multiselect:((q=o.getAttribute("data-multiselect"))==="True"||q==="true"||q==="1")||false,extensions:o.getAttribute("data-extensions")||"",_trigger:"button"})});o.parentNode.insertBefore(n,o)})(j)}}m=document.getElementsByTagName("a");for(k=0,h=m.length;k<h;k++){j=m[k];if(__indexOf.call((j.getAttribute("class")||"").split(" "),"dropbox-saver")>=0){(function(n){Dropbox.createSaveButton({files:function(){return[{url:n.getAttribute("data-url")||n.href,filename:n.getAttribute("data-filename")||Dropbox.filenameFromPath(n.pathname)}]},success:function(){b(n,"DbxSaverSuccess")},progress:function(o){b(n,"DbxSaverProgress",{progress:o})},cancel:function(){b(n,"DbxSaverCancel")},error:function(o){b(n,"DbxSaverError",{error:o})}},n)})(j)}}};if(document.readyState==="complete"){setTimeout(a,0)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false)}else{document.attachEvent("onreadystatechange",a)}}})();